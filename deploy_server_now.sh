#!/bin/bash
python3 << 'PYEOF'
import base64, ast, sys

# === /root/memecoin_engine/utils/format.py ===
path = '/root/memecoin_engine/utils/format.py'
b64 = 'ZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGh0bWwKCgpkZWYgX2VzYyh2YWx1ZSk6CiAgICByZXR1cm4gaHRtbC5lc2NhcGUoc3RyKHZhbHVlKSkKCgpkZWYgX3JlbmRlcl9wcmUocm93cyk6CiAgICBsaW5lcyA9IFtzdHIocm93IG9yICIiKSBmb3Igcm93IGluIHJvd3NdCiAgICBpZiBub3QgbGluZXM6CiAgICAgICAgcmV0dXJuICIiCiAgICBwYW5lbF93aWR0aCA9IF9QQU5FTF9XSURUSAogICAgd3JhcHBlZCA9IFtdCiAgICBmb3IgbGluZSBpbiBsaW5lczoKICAgICAgICB3cmFwcGVkLmV4dGVuZChfd3JhcF90ZXh0KGxpbmUsIHBhbmVsX3dpZHRoKSkKICAgIHJldHVybiAiXG4iLmpvaW4oZiI8Y29kZT57X2VzYyhsaW5lKX08L2NvZGU+IiBmb3IgbGluZSBpbiB3cmFwcGVkKQoKCl9QQU5FTF9XSURUSCA9IDQyCgoKZGVmIF90cmltX3RleHQodmFsdWUsIG1heF9sZW4pOgogICAgdGV4dCA9IHN0cih2YWx1ZSBvciAiIikKICAgIGlmIG1heF9sZW4gPD0gMDoKICAgICAgICByZXR1cm4gdGV4dAogICAgcmV0dXJuIHRleHQKCgpkZWYgX3dyYXBfdGV4dCh2YWx1ZSwgbWF4X2xlbik6CiAgICB0ZXh0ID0gc3RyKHZhbHVlIG9yICIiKQogICAgaWYgbWF4X2xlbiA8PSAwIG9yIGxlbih0ZXh0KSA8PSBtYXhfbGVuOgogICAgICAgIHJldHVybiBbdGV4dF0KICAgIG91dCA9IFtdCiAgICByZW1haW5pbmcgPSB0ZXh0CiAgICB3aGlsZSBsZW4ocmVtYWluaW5nKSA+IG1heF9sZW46CiAgICAgICAgY3V0ID0gcmVtYWluaW5nLnJmaW5kKCIgIiwgMCwgbWF4X2xlbiArIDEpCiAgICAgICAgaWYgY3V0IDw9IDA6CiAgICAgICAgICAgIGN1dCA9IG1heF9sZW4KICAgICAgICBvdXQuYXBwZW5kKHJlbWFpbmluZ1s6Y3V0XS5yc3RyaXAoKSkKICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmdbY3V0Ol0ubHN0cmlwKCkKICAgIG91dC5hcHBlbmQocmVtYWluaW5nKQogICAgcmV0dXJuIG91dAoKCmRlZiBfa3YobGFiZWwsIHZhbHVlLCB3aWR0aDogaW50ID0gX1BBTkVMX1dJRFRIKToKICAgIGtleSA9IHN0cihsYWJlbCBvciAiIikudXBwZXIoKVs6OV0KICAgIGxpbmUgPSBmIntrZXk6PDl9IHwge3ZhbHVlfSIKICAgIHJldHVybiBfdHJpbV90ZXh0KGxpbmUsIHdpZHRoKQoKCmRlZiBfaGVhZGVyX2Jsb2NrKHRhZzogc3RyLCBoZWFkZXJfcm93cz1Ob25lLCB3aWR0aDogaW50ID0gX1BBTkVMX1dJRFRIKToKICAgIHJvd3MgPSBbCiAgICAgICAgZiI8Yj57X2VzYyh0YWcpfTwvYj4iLAogICAgICAgIGYiPGNvZGU+eyctJyAqIG1pbigzMCwgd2lkdGgpfTwvY29kZT4iLAogICAgXQogICAgZm9yIHJvdyBpbiAoaGVhZGVyX3Jvd3Mgb3IgW10pOgogICAgICAgIHJvd3MuYXBwZW5kKGYiPGNvZGU+e19lc2MoX3RyaW1fdGV4dChzdHIocm93IG9yICcnKSwgd2lkdGgpKX08L2NvZGU+IikKICAgIHJldHVybiAiXG4iLmpvaW4ocm93cykKCgpkZWYgX3Njb3JlX2JhcihzY29yZSk6CiAgICBzY29yZSA9IG1heCgwLCBtaW4oMTAwLCBmbG9hdChzY29yZSBvciAwKSkpCiAgICBibG9ja3MgPSBpbnQocm91bmQoc2NvcmUgLyAxMC4wKSkKICAgIHJldHVybiAoIiMiICogYmxvY2tzKSArICgiLSIgKiAoMTAgLSBibG9ja3MpKQoKCmRlZiBfZm10X3BjdCh2YWx1ZSk6CiAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgIHJldHVybiAiTi9BIgogICAgdHJ5OgogICAgICAgIG51bWJlciA9IGZsb2F0KHZhbHVlKQogICAgICAgIHNpZ24gPSAiKyIgaWYgbnVtYmVyID4gMCBlbHNlICIiCiAgICAgICAgcmV0dXJuIGYie3NpZ259e251bWJlcjouMmZ9JSIKICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToKICAgICAgICByZXR1cm4gIk4vQSIKCgpkZWYgX2ZtdF9udW0odmFsdWUsIGRpZ2l0cz0wKToKICAgIHRyeToKICAgICAgICByZXR1cm4gZiJ7ZmxvYXQodmFsdWUpOiwue2RpZ2l0c31mfSIKICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToKICAgICAgICByZXR1cm4gIk4vQSIKCgpkZWYgX2ZtdF91c2RfY29tcGFjdCh2YWx1ZSk6CiAgICB0cnk6CiAgICAgICAgbiA9IGZsb2F0KHZhbHVlKQogICAgZXhjZXB0IChUeXBlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHJldHVybiAiTi9BIgogICAgYWJzX24gPSBhYnMobikKICAgIGlmIGFic19uID49IDFfMDAwXzAwMF8wMDA6CiAgICAgICAgcmV0dXJuIGYiJHtuLzFfMDAwXzAwMF8wMDA6LjJmfUIiCiAgICBpZiBhYnNfbiA+PSAxXzAwMF8wMDA6CiAgICAgICAgcmV0dXJuIGYiJHtuLzFfMDAwXzAwMDouMmZ9TSIKICAgIGlmIGFic19uID49IDFfMDAwOgogICAgICAgIHJldHVybiBmIiR7bi8xXzAwMDouMWZ9SyIKICAgIHJldHVybiBmIiR7bjouMGZ9IgoKCmRlZiBfZm10X3ByaWNlX3ByZWNpc2UodmFsdWUpOgogICAgdHJ5OgogICAgICAgIHAgPSBmbG9hdCh2YWx1ZSkKICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToKICAgICAgICByZXR1cm4gIk4vQSIKICAgIGlmIHAgPD0gMDoKICAgICAgICByZXR1cm4gIk4vQSIKICAgIGlmIHAgPCAwLjAxOgogICAgICAgIHJldHVybiBmIiR7cDouOGZ9Ii5yc3RyaXAoIjAiKS5yc3RyaXAoIi4iKQogICAgaWYgcCA8IDE6CiAgICAgICAgcmV0dXJuIGYiJHtwOi42Zn0iLnJzdHJpcCgiMCIpLnJzdHJpcCgiLiIpCiAgICBpZiBwIDwgMTAwMDoKICAgICAgICByZXR1cm4gZiIke3A6LjRmfSIucnN0cmlwKCIwIikucnN0cmlwKCIuIikKICAgIHJldHVybiBfZm10X3VzZF9jb21wYWN0KHApCgoKZGVmIF9mbXRfaG9sZGVycyh2YWx1ZSk6CiAgICBpZiB2YWx1ZSBpbiAoTm9uZSwgIiIsICJOL0EiKToKICAgICAgICByZXR1cm4gIk4vQSIKICAgIHRyeToKICAgICAgICByZXR1cm4gZiJ7aW50KGZsb2F0KHZhbHVlKSk6LH0iCiAgICBleGNlcHQgKFR5cGVFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgcmV0dXJuICJOL0EiCgoKZGVmIF9jb25maWRlbmNlX2xhYmVsKGNvbmZpZGVuY2UpOgogICAgY29uZiA9IHN0cihjb25maWRlbmNlIG9yICJDIikudXBwZXIoKQogICAgaWYgY29uZiA9PSAiQSI6CiAgICAgICAgcmV0dXJuICJBIgogICAgaWYgY29uZiA9PSAiQiI6CiAgICAgICAgcmV0dXJuICJCIgogICAgcmV0dXJuICJDIgoKCmRlZiBfY29tcGFjdF9lbnRyeShlbnRyeV90eXBlKToKICAgIHRleHQgPSBzdHIoZW50cnlfdHlwZSBvciAiIikuc3RyaXAoKS5sb3dlcigpCiAgICBpZiB0ZXh0ID09ICJtb21lbnR1bSBjb250aW51YXRpb24iOgogICAgICAgIHJldHVybiAiTW9tZW50dW0gY29udGludWF0aW9uIgogICAgaWYgdGV4dCA9PSAiZGlwIHJlY292ZXJ5IHNldHVwIjoKICAgICAgICByZXR1cm4gIkRpcCByZWNvdmVyeSIKICAgIHJldHVybiBzdHIoZW50cnlfdHlwZSBvciAiTi9BIikKCgpkZWYgX3JzaV9tZWFuaW5nKHJzaV92YWx1ZSk6CiAgICBpZiByc2lfdmFsdWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gTm9uZQogICAgdHJ5OgogICAgICAgIHIgPSBmbG9hdChyc2lfdmFsdWUpCiAgICBleGNlcHQgKFR5cGVFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGlmIHIgPCAzNToKICAgICAgICByZXR1cm4gIlJTSSBvdmVyc29sZCIKICAgIGlmIHIgPCA1MDoKICAgICAgICByZXR1cm4gIlJTSSB3ZWFrIgogICAgaWYgciA8IDY1OgogICAgICAgIHJldHVybiAiUlNJIGhlYWx0aHkiCiAgICBpZiByIDwgNzU6CiAgICAgICAgcmV0dXJuICJSU0kgc3Ryb25nIgogICAgcmV0dXJuICJSU0kgb3ZlcmJvdWdodCIKCgpkZWYgX21hY2RfbWVhbmluZyhtYWNkX2hpc3RfdmFsdWUpOgogICAgaWYgbWFjZF9oaXN0X3ZhbHVlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIHRyeToKICAgICAgICBoID0gZmxvYXQobWFjZF9oaXN0X3ZhbHVlKQogICAgZXhjZXB0IChUeXBlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHJldHVybiBOb25lCiAgICBpZiBoID4gMC4wMToKICAgICAgICByZXR1cm4gIk1BQ0QgYnVsbGlzaCBzdHJvbmciCiAgICBpZiBoID4gMDoKICAgICAgICByZXR1cm4gIk1BQ0QgYnVsbGlzaCIKICAgIGlmIGggPiAtMC4wMToKICAgICAgICByZXR1cm4gIk1BQ0QgbmV1dHJhbCIKICAgIHJldHVybiAiTUFDRCBiZWFyaXNoIgoKCmRlZiBfcHJpb3JpdHlfZnJvbV9zY29yZShzY29yZSk6CiAgICB0cnk6CiAgICAgICAgcyA9IGZsb2F0KHNjb3JlIG9yIDApCiAgICBleGNlcHQgKFR5cGVFcnJvciwgVmFsdWVFcnJvcik6CiAgICAgICAgcmV0dXJuICJQMyIKICAgIGlmIHMgPj0gOTA6CiAgICAgICAgcmV0dXJuICJQMSIKICAgIGlmIHMgPj0gODA6CiAgICAgICAgcmV0dXJuICJQMiIKICAgIHJldHVybiAiUDMiCgoKZGVmIF9kYXRhX2FnZV90ZXh0KGxhc3RfdHJhZGVfdW5peCk6CiAgICB0cnk6CiAgICAgICAgdHMgPSBpbnQoZmxvYXQobGFzdF90cmFkZV91bml4KSkKICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBWYWx1ZUVycm9yKToKICAgICAgICByZXR1cm4gIk4vQSIKICAgIGlmIHRzIDw9IDA6CiAgICAgICAgcmV0dXJuICJOL0EiCiAgICBub3dfdHMgPSBpbnQoZGF0ZXRpbWUudXRjbm93KCkudGltZXN0YW1wKCkpCiAgICBhZ2Vfc2VjID0gbWF4KDAsIG5vd190cyAtIHRzKQogICAgaWYgYWdlX3NlYyA8IDYwOgogICAgICAgIHJldHVybiBmInthZ2Vfc2VjfXMiCiAgICBpZiBhZ2Vfc2VjIDwgMzYwMDoKICAgICAgICByZXR1cm4gZiJ7YWdlX3NlYyAvLyA2MH1tIgogICAgcmV0dXJuIGYie2FnZV9zZWMgLy8gMzYwMH1oIgoKCmRlZiBfaW52YWxpZGF0aW9uX2Zyb21fcmlza19wbGFuKHJpc2tfcGxhbik6CiAgICByYXcgPSBzdHIocmlza19wbGFuIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3QgcmF3OgogICAgICAgIHJldHVybiAiVGhlc2lzIGJyZWFrIgogICAgcmV0dXJuIHJhdy5zcGxpdCgifCIsIDEpWzBdLnN0cmlwKCkKCgpkZWYgZm9ybWF0X3NpZ25hbCh0b2tlbl9kYXRhLCBjb21wYWN0OiBib29sID0gVHJ1ZSk6CiAgICBzZXAgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIgogICAgc3ltYm9sID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJzeW1ib2wiLCAiVU5LTk9XTiIpKS51cHBlcigpCiAgICBzY29yZSA9IGZsb2F0KHRva2VuX2RhdGEuZ2V0KCJzY29yZSIsIDApIG9yIDApCiAgICBsaXF1aWRpdHkgPSBmbG9hdCh0b2tlbl9kYXRhLmdldCgibGlxdWlkaXR5IiwgMCkgb3IgMCkKICAgIHZvbHVtZV8yNGggPSBmbG9hdCh0b2tlbl9kYXRhLmdldCgidm9sdW1lXzI0aCIsIDApIG9yIDApCiAgICBob2xkZXJzID0gX2ZtdF9ob2xkZXJzKHRva2VuX2RhdGEuZ2V0KCJob2xkZXJzIiwgIk4vQSIpKQogICAgdHJlbmQgPSB0b2tlbl9kYXRhLmdldCgidHJlbmQiLCAiVW5rbm93biIpCiAgICBlbnRyeV90eXBlID0gX2NvbXBhY3RfZW50cnkodG9rZW5fZGF0YS5nZXQoImVudHJ5X3R5cGUiLCAiTi9BIikpCiAgICBjb25maWRlbmNlID0gdG9rZW5fZGF0YS5nZXQoImNvbmZpZGVuY2UiLCAiQyIpCiAgICByZWdpbWVfbGFiZWwgPSBzdHIodG9rZW5fZGF0YS5nZXQoInJlZ2ltZV9sYWJlbCIsICJVTktOT1dOIikpCiAgICBwcm9maWxlID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJwcm9maWxlIiwgIlNUUkFURUdJQyIpKS51cHBlcigpCiAgICBjaGFuZ2VfMjRoID0gdG9rZW5fZGF0YS5nZXQoImNoYW5nZV8yNGgiKQogICAgcnNpID0gdG9rZW5fZGF0YS5nZXQoInJzaSIpCiAgICBtYWNkX2hpc3QgPSB0b2tlbl9kYXRhLmdldCgibWFjZF9oaXN0IikKICAgIG1hcmtldF9jYXAgPSB0b2tlbl9kYXRhLmdldCgibWFya2V0X2NhcCIpCiAgICBmZHYgPSB0b2tlbl9kYXRhLmdldCgiZmR2IikKICAgIHdhbGxldF9maXQgPSBzdHIodG9rZW5fZGF0YS5nZXQoIndhbGxldF9maXQiKSBvciAiVzIiKQogICAgcmlza19wbGFuID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJyaXNrX3BsYW4iKSBvciAiU0wgLTEwJSB8IFRQICsxMi8rMjUgfCBUcmFpbCAxMCUiKQogICAgcm90YXRpb25fcGxhbiA9IHN0cih0b2tlbl9kYXRhLmdldCgicm90YXRpb25fcGxhbiIpIG9yICJSb3RhdGUgcHJvZml0cyB0byBXMS9VU0RDIHBlciBwbGFuIikKICAgIGxhc3RfdHJhZGVfdW5peCA9IHRva2VuX2RhdGEuZ2V0KCJsYXN0X3RyYWRlX3VuaXgiKQoKICAgIHNjb3JlX2xpbmUgPSBmIntzY29yZTouMWZ9LzEwMCB7X3Njb3JlX2JhcihzY29yZSl9IgogICAgY29uZmlkZW5jZV9saW5lID0gX2NvbmZpZGVuY2VfbGFiZWwoY29uZmlkZW5jZSkKICAgIGNoYW5nZV9saW5lID0gX2ZtdF9wY3QoY2hhbmdlXzI0aCkKICAgIHByaW9yaXR5ID0gX3ByaW9yaXR5X2Zyb21fc2NvcmUoc2NvcmUpCiAgICBjYXBfdmFsdWUgPSBtYXJrZXRfY2FwIGlmIGlzaW5zdGFuY2UobWFya2V0X2NhcCwgKGludCwgZmxvYXQpKSBhbmQgbWFya2V0X2NhcCA+IDAgZWxzZSBmZHYKICAgIGFjdGlvbiA9ICJFTlRFUiBOT1ciIGlmIHNjb3JlID49IDc1IGVsc2UgIldBVENIIgogICAgYWN0aW9uX2Vtb2ppID0gIvCfn6IiIGlmIHNjb3JlID49IDc1IGVsc2UgIvCfn6EiCiAgICByZWdpbWVfZW1vamkgPSAi8J+foiIgaWYgIk9OIiBpbiByZWdpbWVfbGFiZWwgZWxzZSAoIvCflLQiIGlmICJPRkYiIGluIHJlZ2ltZV9sYWJlbCBlbHNlICLwn5+hIikKICAgIGludmFsaWRhdGlvbiA9IF9pbnZhbGlkYXRpb25fZnJvbV9yaXNrX3BsYW4ocmlza19wbGFuKQoKICAgICMgRW50cnkgcHJpY2UgYW5kIHRhcmdldHMKICAgIHByaWNlID0gZmxvYXQodG9rZW5fZGF0YS5nZXQoInByaWNlIikgb3IgMCkKICAgIGVudHJ5X2Rpc3BsYXkgPSBfZm10X3ByaWNlX3ByZWNpc2UocHJpY2UpIGlmIHByaWNlID4gMCBlbHNlICJOL0EiCiAgICBpZiBwcmljZSA+IDA6CiAgICAgICAgdGFyZ2V0MSA9IF9mbXRfcHJpY2VfcHJlY2lzZShwcmljZSAqIDEuMTIpCiAgICAgICAgdGFyZ2V0MiA9IF9mbXRfcHJpY2VfcHJlY2lzZShwcmljZSAqIDEuMjUpCiAgICAgICAgc3RvcCA9IF9mbXRfcHJpY2VfcHJlY2lzZShwcmljZSAqIDAuOTApCiAgICBlbHNlOgogICAgICAgIHRhcmdldDEgPSB0YXJnZXQyID0gc3RvcCA9ICJOL0EiCgogICAgbGluZXMgPSBbCiAgICAgICAgZiI8Yj7wn5OLIFtTSUdOQUxdOiBNRU1FQ09JTiBTRVRVUDwvYj4iLAogICAgICAgIGYiPGNvZGU+e3NlcH08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfjq8gQ09JTjogJHtfZXNjKHN5bWJvbCl9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5OKIFBST0ZJTEU6IHtfZXNjKHByb2ZpbGUpfTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+4q2QIFNDT1JFOiB7X2VzYyhzY29yZV9saW5lKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfkrAgTUFSS0VUQ0FQOiB7X2VzYyhfZm10X3VzZF9jb21wYWN0KGNhcF92YWx1ZSkpfSB8IDI0SCB7X2VzYyhjaGFuZ2VfbGluZSl9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5KnIExJUVVJRElUWToge19lc2MoX2ZtdF91c2RfY29tcGFjdChsaXF1aWRpdHkpKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPntyZWdpbWVfZW1vaml9IFJFR0lNRToge19lc2MocmVnaW1lX2xhYmVsKX0gfCBHUkFERSB7X2VzYyhjb25maWRlbmNlX2xpbmUpfTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+e3NlcH08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPnthY3Rpb25fZW1vaml9IFNJR05BTDoge19lc2MoYWN0aW9uKX08L2NvZGU+IiwKICAgIF0KCiAgICBpZiBub3QgY29tcGFjdDoKICAgICAgICB0ZWNoX3BhcnRzID0gW3ggZm9yIHggaW4gW19yc2lfbWVhbmluZyhyc2kpLCBfbWFjZF9tZWFuaW5nKG1hY2RfaGlzdCldIGlmIHhdCiAgICAgICAgaWYgdGVjaF9wYXJ0czoKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYiPGNvZGU+8J+TiCBNT01FTlRVTToge19lc2MoJyB8ICcuam9pbih0ZWNoX3BhcnRzKSl9PC9jb2RlPiIpCiAgICAgICAgbGluZXMuYXBwZW5kKGYiPGNvZGU+8J+RmyBXQUxMRVQgRklUOiB7X2VzYyh3YWxsZXRfZml0KX08L2NvZGU+IikKICAgICAgICBpZiBob2xkZXJzICE9ICJOL0EiOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiI8Y29kZT7wn5GlIEhPTERFUlM6IHtfZXNjKGhvbGRlcnMpfTwvY29kZT4iKQogICAgICAgIGxpbmVzLmFwcGVuZChmIjxjb2RlPvCfmqsgSU5WQUxJRDoge19lc2MoaW52YWxpZGF0aW9uKX08L2NvZGU+IikKCiAgICBsaW5lcyArPSBbCiAgICAgICAgZiI8Y29kZT57c2VwfTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+8J+TjSBFbnRyeToge19lc2MoZW50cnlfZGlzcGxheSl9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn46vIFRhcmdldCAxOiB7X2VzYyh0YXJnZXQxKX0gKCsxMiUpPC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn46vIFRhcmdldCAyOiB7X2VzYyh0YXJnZXQyKX0gKCsyNSUpPC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5uRIFN0b3A6IHtfZXNjKHN0b3ApfSAoLTEwJSk8L2NvZGU+IiwKICAgIF0KCiAgICBpZiBub3QgY29tcGFjdDoKICAgICAgICBsaW5lcyArPSBbCiAgICAgICAgICAgIGYiPGNvZGU+e3NlcH08L2NvZGU+IiwKICAgICAgICAgICAgZiI8Y29kZT7wn5OLIFJJU0s6IHtfZXNjKHJpc2tfcGxhbil9PC9jb2RlPiIsCiAgICAgICAgICAgIGYiPGNvZGU+8J+UhCBST1RBVElPTjoge19lc2Mocm90YXRpb25fcGxhbil9PC9jb2RlPiIsCiAgICAgICAgXQoKICAgIHJldHVybiAiXG4iLmpvaW4obGluZXMpCgoKZGVmIGZvcm1hdF9ydW5uZXJfd2F0Y2godG9rZW5fZGF0YSwgY29tcGFjdDogYm9vbCA9IFRydWUpOgogICAgc3ltYm9sID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJzeW1ib2wiKSBvciAiVU5LTk9XTiIpLnVwcGVyKCkKICAgIG5hbWUgPSBzdHIodG9rZW5fZGF0YS5nZXQoIm5hbWUiKSBvciBzeW1ib2wpCiAgICBhZ2VfaG91cnMgPSB0b2tlbl9kYXRhLmdldCgiYWdlX2hvdXJzIikKICAgIG1hcmtldF9jYXAgPSB0b2tlbl9kYXRhLmdldCgibWFya2V0X2NhcCIpCiAgICBmZHYgPSB0b2tlbl9kYXRhLmdldCgiZmR2IikKICAgIGxpcXVpZGl0eSA9IHRva2VuX2RhdGEuZ2V0KCJsaXF1aWRpdHkiKQogICAgdm9sdW1lXzI0aCA9IHRva2VuX2RhdGEuZ2V0KCJ2b2x1bWVfMjRoIikKICAgIGNoYW5nZV8yNGggPSB0b2tlbl9kYXRhLmdldCgiY2hhbmdlXzI0aCIpCiAgICB0eG5zX2gxID0gdG9rZW5fZGF0YS5nZXQoInR4bnNfaDEiKQogICAgd2F0Y2hfc2NvcmUgPSB0b2tlbl9kYXRhLmdldCgid2F0Y2hfc2NvcmUiKQogICAgeF9wcm94eSA9IHRva2VuX2RhdGEuZ2V0KCJ4X3Byb3h5X2xhYmVsIiwgIk4vQSIpCiAgICBuYXJyYXRpdmUgPSB0b2tlbl9kYXRhLmdldCgibmFycmF0aXZlX2xhYmVsIiwgIk4vQSIpCiAgICBub3RlID0gdG9rZW5fZGF0YS5nZXQoIm5vdGUiLCAiIikKICAgIHdhbGxldF9maXQgPSBzdHIodG9rZW5fZGF0YS5nZXQoIndhbGxldF9maXQiKSBvciAiVzMiKQogICAgcmlza19wbGFuID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJyaXNrX3BsYW4iKSBvciAiU21hbGwgc2l6ZSBvbmx5IHwgaGFyZCBzdG9wIHwgcXVpY2sgc2NhbGUtb3V0cyIpCiAgICByb3RhdGlvbl9wbGFuID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJyb3RhdGlvbl9wbGFuIikgb3IgIlJvdGF0ZSB3aW5zIGludG8gVzEvVzIgb3IgVVNEQyIpCiAgICBjYXBfdmFsdWUgPSBtYXJrZXRfY2FwIGlmIGlzaW5zdGFuY2UobWFya2V0X2NhcCwgKGludCwgZmxvYXQpKSBhbmQgbWFya2V0X2NhcCA+IDAgZWxzZSBmZHYKICAgIGNhcF9rZXkgPSAiTUtUX0NBUCIgaWYgaXNpbnN0YW5jZShtYXJrZXRfY2FwLCAoaW50LCBmbG9hdCkpIGFuZCBtYXJrZXRfY2FwID4gMCBlbHNlICJGRFYiCiAgICBhZ2VfdGV4dCA9IGYie2Zsb2F0KGFnZV9ob3Vycyk6LjFmfWgiIGlmIGlzaW5zdGFuY2UoYWdlX2hvdXJzLCAoaW50LCBmbG9hdCkpIGVsc2UgIk4vQSIKICAgIHNjb3JlX3RleHQgPSBmIntmbG9hdCh3YXRjaF9zY29yZSk6LjFmfS8xMDAiIGlmIGlzaW5zdGFuY2Uod2F0Y2hfc2NvcmUsIChpbnQsIGZsb2F0KSkgZWxzZSAiTi9BIgogICAgcm93cyA9IFsKICAgICAgICBfa3YoIlBSSU9SSVRZIiwgIlAyIiksCiAgICAgICAgX2t2KCJTQ09SRSIsIHNjb3JlX3RleHQpLAogICAgICAgIF9rdigiQUdFIiwgYWdlX3RleHQpLAogICAgICAgIF9rdigiUFJJQ0UiLCBmIntfZm10X3VzZF9jb21wYWN0KHRva2VuX2RhdGEuZ2V0KCdwcmljZScpKX0gfCAyNEgge19mbXRfcGN0KGNoYW5nZV8yNGgpfSIpLAogICAgICAgIF9rdihjYXBfa2V5LCBfZm10X3VzZF9jb21wYWN0KGNhcF92YWx1ZSkpLAogICAgICAgIF9rdigiTElRVUlESVRZIiwgX2ZtdF91c2RfY29tcGFjdChsaXF1aWRpdHkpKSwKICAgICAgICBfa3YoIkFDVElPTiIsICJNT05JVE9SIiksCiAgICAgICAgX2t2KCJSRUFTT04iLCAiRnJlc2ggbGlzdGluZyB3aXRoIGFjdGl2ZSBmbG93IiksCiAgICBdCiAgICBpZiBub3QgY29tcGFjdDoKICAgICAgICByb3dzLmV4dGVuZCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2t2KCJXQUxMRVQiLCB3YWxsZXRfZml0KSwKICAgICAgICAgICAgICAgIF9rdigiWF9QUk9YWSIsIHhfcHJveHkpLAogICAgICAgICAgICAgICAgX2t2KCJOQVJSQVRJVkUiLCBuYXJyYXRpdmUpLAogICAgICAgICAgICAgICAgX2t2KCJJTlZBTElEIiwgIkZsb3cgY29sbGFwc2UgLyBsaXF1aWRpdHkgZmFkZSIpLAogICAgICAgICAgICAgICAgX2t2KCJSSVNLIiwgcmlza19wbGFuKSwKICAgICAgICAgICAgICAgIF9rdigiUk9UQVRJT04iLCByb3RhdGlvbl9wbGFuKSwKICAgICAgICAgICAgICAgIF9rdigiTk9URSIsIG5vdGUgb3IgIldhdGNobGlzdC1vbmx5IGFsZXJ0LiBOb3QgYSBidXkgc2lnbmFsLiIpLAogICAgICAgICAgICBdCiAgICAgICAgKQogICAgaGVhZGVyID0gX2hlYWRlcl9ibG9jaygKICAgICAgICAiW1NJR05BTF06UlVOTkVSIiwKICAgICAgICBoZWFkZXJfcm93cz1bCiAgICAgICAgICAgIF9rdigiU1lNQk9MIiwgZiIke3N5bWJvbH0iKSwKICAgICAgICAgICAgX2t2KCJUT0tFTiIsIG5hbWUpLAogICAgICAgIF0sCiAgICApCiAgICByZXR1cm4gaGVhZGVyICsgIlxuIiArIF9yZW5kZXJfcHJlKHJvd3MpCgoKZGVmIF93YXRjaGxpc3Rfc3RhdHVzX2xhYmVsKHN0YXR1cyk6CiAgICByYXcgPSBzdHIoc3RhdHVzIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3QgcmF3OgogICAgICAgIHJldHVybiAiVW5rbm93biIKICAgIHVwcGVyID0gcmF3LnVwcGVyKCkKICAgIGlmIHVwcGVyID09ICJOT0RBVEEiOgogICAgICAgIHJldHVybiAiTm9EYXRhIgogICAgcmV0dXJuIHJhdy50aXRsZSgpCgoKZGVmIF93YXRjaGxpc3Rfc3RhdHVzX2NvZGUoc3RhdHVzKToKICAgIHN0YXR1c19ub3JtID0gX3dhdGNobGlzdF9zdGF0dXNfbGFiZWwoc3RhdHVzKQogICAgbWFwcGluZyA9IHsKICAgICAgICAiTW9tZW50dW0iOiAiTU9NIiwKICAgICAgICAiUmVjbGFpbSI6ICJSRUMiLAogICAgICAgICJCcmVha2Rvd24iOiAiQlJLIiwKICAgICAgICAiUmFuZ2UiOiAiUk5HIiwKICAgICAgICAiVm9sYXRpbGUiOiAiVk9MIiwKICAgICAgICAiSWxsaXF1aWQiOiAiSUxMIiwKICAgICAgICAiTm9EYXRhIjogIk5PRCIsCiAgICAgICAgIlVua25vd24iOiAiVU5LIiwKICAgIH0KICAgIHJldHVybiBtYXBwaW5nLmdldChzdGF0dXNfbm9ybSwgIlVOSyIpLCBzdGF0dXNfbm9ybQoKCmRlZiBmb3JtYXRfd2F0Y2hsaXN0X3NpZ25hbCh0b2tlbl9kYXRhLCBjb21wYWN0OiBib29sID0gVHJ1ZSk6CiAgICBzeW1ib2wgPSBzdHIodG9rZW5fZGF0YS5nZXQoInN5bWJvbCIpIG9yICJVTktOT1dOIikudXBwZXIoKQogICAgc3RhdHVzX2NvZGUsIHN0YXR1c19sYWJlbCA9IF93YXRjaGxpc3Rfc3RhdHVzX2NvZGUodG9rZW5fZGF0YS5nZXQoInN0YXR1cyIpKQogICAgcmVhc29uID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJyZWFzb24iKSBvciAiU3RhdHVzIGNvbmRpdGlvbiB0cmlnZ2VyZWQuIikKICAgIG1hcmtldF9jYXAgPSB0b2tlbl9kYXRhLmdldCgibWFya2V0X2NhcCIpCiAgICBmZHYgPSB0b2tlbl9kYXRhLmdldCgiZmR2IikKICAgIGNhcF92YWx1ZSA9IG1hcmtldF9jYXAgaWYgaXNpbnN0YW5jZShtYXJrZXRfY2FwLCAoaW50LCBmbG9hdCkpIGFuZCBtYXJrZXRfY2FwID4gMCBlbHNlIGZkdgogICAgY2FwX2tleSA9ICJNS1RfQ0FQIiBpZiBpc2luc3RhbmNlKG1hcmtldF9jYXAsIChpbnQsIGZsb2F0KSkgYW5kIG1hcmtldF9jYXAgPiAwIGVsc2UgIkZEViIKICAgIHVwc2lkZSA9IHN0cih0b2tlbl9kYXRhLmdldCgidXBzaWRlX3BvdGVudGlhbCIpIG9yICJNZWRpdW0iKS50aXRsZSgpCiAgICBmYWlsdXJlID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJmYWlsdXJlX3Jpc2siKSBvciAiTWVkaXVtIikudGl0bGUoKQogICAgd2FsbGV0X2ZpdCA9IHN0cih0b2tlbl9kYXRhLmdldCgid2FsbGV0X2ZpdCIpIG9yICJXMyIpCiAgICByaXNrX3BsYW4gPSBzdHIodG9rZW5fZGF0YS5nZXQoInJpc2tfcGxhbiIpIG9yICJTbWFsbCBzaXplIG9ubHkgfCBoYXJkIHN0b3AgfCBxdWljayBzY2FsZS1vdXRzIikKICAgIHJvdGF0aW9uX3BsYW4gPSBzdHIodG9rZW5fZGF0YS5nZXQoInJvdGF0aW9uX3BsYW4iKSBvciAiUm90YXRlIHdpbnMgaW50byBXMS9XMiBvciBVU0RDIikKICAgIGFjdGlvbiA9ICJNT05JVE9SIgogICAgaWYgc3RhdHVzX2xhYmVsID09ICJCcmVha2Rvd24iOgogICAgICAgIGFjdGlvbiA9ICJBVk9JRC9FWElUIgogICAgZWxpZiBzdGF0dXNfbGFiZWwgaW4geyJNb21lbnR1bSIsICJSZWNsYWltIn06CiAgICAgICAgYWN0aW9uID0gIldBVENIIEZPUiBFTlRSWSIKCiAgICByb3dzID0gWwogICAgICAgIF9rdigiUFJJT1JJVFkiLCAiUDIiKSwKICAgICAgICBfa3YoIlNUQVRVUyIsIGYie3N0YXR1c19sYWJlbH0gKHtzdGF0dXNfY29kZX0pIiksCiAgICAgICAgX2t2KCJQUklDRSIsIGYie19mbXRfdXNkX2NvbXBhY3QodG9rZW5fZGF0YS5nZXQoJ3ByaWNlJykpfSB8IDI0SCB7X2ZtdF9wY3QodG9rZW5fZGF0YS5nZXQoJ2NoYW5nZV8yNGgnKSl9IiksCiAgICAgICAgX2t2KGNhcF9rZXksIF9mbXRfdXNkX2NvbXBhY3QoY2FwX3ZhbHVlKSksCiAgICAgICAgX2t2KCJMSVFVSURJVFkiLCBfZm10X3VzZF9jb21wYWN0KHRva2VuX2RhdGEuZ2V0KCdsaXF1aWRpdHknKSkpLAogICAgICAgIF9rdigiQUNUSU9OIiwgYWN0aW9uKSwKICAgICAgICBfa3YoIlJFQVNPTiIsIHJlYXNvbiksCiAgICBdCiAgICBpZiBub3QgY29tcGFjdDoKICAgICAgICByb3dzLmV4dGVuZCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2t2KCJXQUxMRVQiLCB3YWxsZXRfZml0KSwKICAgICAgICAgICAgICAgIF9rdigiSU5WQUxJRCIsICJCcmVha2Rvd24gLyBsaXF1aWRpdHkgY3JhY2siKSwKICAgICAgICAgICAgICAgIF9rdigiUklTSyIsIHJpc2tfcGxhbiksCiAgICAgICAgICAgICAgICBfa3YoIlJPVEFUSU9OIiwgcm90YXRpb25fcGxhbiksCiAgICAgICAgICAgICAgICBfa3YoIk5PVEUiLCAiV2F0Y2hsaXN0LW9ubHkgYWxlcnQgKG5vdCBhbiBhdXRvLWJ1eSBzaWduYWwpLiIpLAogICAgICAgICAgICBdCiAgICAgICAgKQogICAgaGVhZGVyID0gX2hlYWRlcl9ibG9jaygKICAgICAgICAiW1NJR05BTF06V0FUQ0hMSVNUIiwKICAgICAgICBoZWFkZXJfcm93cz1bCiAgICAgICAgICAgIF9rdigiU1lNQk9MIiwgZiIke3N5bWJvbH0iKSwKICAgICAgICBdLAogICAgKQogICAgcmV0dXJuIGhlYWRlciArICJcbiIgKyBfcmVuZGVyX3ByZShyb3dzKQoKCmRlZiBmb3JtYXRfbGVnYWN5X3JlY292ZXJ5KHRva2VuX2RhdGEpOgogICAgc2VwID0gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIKICAgIHN5bWJvbCA9IHN0cih0b2tlbl9kYXRhLmdldCgic3ltYm9sIiwgIlVOS05PV04iKSkudXBwZXIoKQogICAgcHJpY2UgPSBmbG9hdCh0b2tlbl9kYXRhLmdldCgicHJpY2UiLCAwKSBvciAwKQogICAgY2hhbmdlXzI0aCA9IHRva2VuX2RhdGEuZ2V0KCJjaGFuZ2VfMjRoIikKICAgIGxpcXVpZGl0eSA9IGZsb2F0KHRva2VuX2RhdGEuZ2V0KCJsaXF1aWRpdHkiLCAwKSBvciAwKQogICAgbWFya2V0X2NhcCA9IHRva2VuX2RhdGEuZ2V0KCJtYXJrZXRfY2FwIikKICAgIGZkdiA9IHRva2VuX2RhdGEuZ2V0KCJmZHYiKQogICAgcGF0dGVybl9sYWJlbCA9IHN0cih0b2tlbl9kYXRhLmdldCgicGF0dGVybl9sYWJlbCIpIG9yICJSZXZlcnNhbCIpCiAgICBwYXR0ZXJuX3N0YXR1cyA9IHN0cih0b2tlbl9kYXRhLmdldCgicGF0dGVybl9zdGF0dXMiKSBvciAiRm9ybWluZyIpCiAgICBzb2xfc3RhdHVzID0gc3RyKHRva2VuX2RhdGEuZ2V0KCJzb2xfc3RhdHVzIikgb3IgIk5FVVRSQUwiKQogICAgYWdlX2RheXMgPSB0b2tlbl9kYXRhLmdldCgiYWdlX2RheXMiKQoKICAgICMgTWFya2V0Y2FwIGRpc3BsYXkgKHByZWZlciBtYXJrZXRfY2FwLCBmYWxsIGJhY2sgdG8gZmR2KQogICAgY2FwX3ZhbHVlID0gbWFya2V0X2NhcCBpZiBpc2luc3RhbmNlKG1hcmtldF9jYXAsIChpbnQsIGZsb2F0KSkgYW5kIG1hcmtldF9jYXAgPiAwIGVsc2UgZmR2CiAgICBjYXBfZGlzcGxheSA9IF9mbXRfdXNkX2NvbXBhY3QoY2FwX3ZhbHVlKSBpZiBjYXBfdmFsdWUgZWxzZSAiTi9BIgoKICAgICMgRm9ybWF0IGVudHJ5IHByaWNlIGZvciB0YXJnZXRzL3N0b3BzCiAgICBpZiBwcmljZSA+PSAxLjA6CiAgICAgICAgZGlzcGxheV9wcmljZSA9IGYiJHtwcmljZTouNGZ9IgogICAgZWxpZiBwcmljZSA+PSAwLjAxOgogICAgICAgIGRpc3BsYXlfcHJpY2UgPSBmIiR7cHJpY2U6LjZmfSIKICAgIGVsaWYgcHJpY2UgPiAwOgogICAgICAgIGRpc3BsYXlfcHJpY2UgPSBmIiR7cHJpY2U6LjhmfSIKICAgIGVsc2U6CiAgICAgICAgZGlzcGxheV9wcmljZSA9ICJOL0EiCgogICAgY2hhbmdlX2xpbmUgPSBfZm10X3BjdChjaGFuZ2VfMjRoKQogICAgaWYgcHJpY2UgPj0gMC4wMToKICAgICAgICB0YXJnZXQxID0gZiIke3ByaWNlICogMS41Oi42Zn0iIGlmIHByaWNlID4gMCBlbHNlICJOL0EiCiAgICAgICAgdGFyZ2V0MiA9IGYiJHtwcmljZSAqIDIuMDouNmZ9IiBpZiBwcmljZSA+IDAgZWxzZSAiTi9BIgogICAgICAgIHN0b3AgPSBmIiR7cHJpY2UgKiAwLjU6LjZmfSIgaWYgcHJpY2UgPiAwIGVsc2UgIk4vQSIKICAgIGVsc2U6CiAgICAgICAgdGFyZ2V0MSA9IGYiJHtwcmljZSAqIDEuNTouOGZ9Ii5yc3RyaXAoIjAiKS5yc3RyaXAoIi4iKSBpZiBwcmljZSA+IDAgZWxzZSAiTi9BIgogICAgICAgIHRhcmdldDIgPSBmIiR7cHJpY2UgKiAyLjA6LjhmfSIucnN0cmlwKCIwIikucnN0cmlwKCIuIikgaWYgcHJpY2UgPiAwIGVsc2UgIk4vQSIKICAgICAgICBzdG9wID0gZiIke3ByaWNlICogMC41Oi44Zn0iLnJzdHJpcCgiMCIpLnJzdHJpcCgiLiIpIGlmIHByaWNlID4gMCBlbHNlICJOL0EiCgogICAgYWdlX3RleHQgPSBmIntpbnQoYWdlX2RheXMpfWQiIGlmIGlzaW5zdGFuY2UoYWdlX2RheXMsIChpbnQsIGZsb2F0KSkgYW5kIGFnZV9kYXlzID4gMCBlbHNlICI+OTBkIgogICAgc29sX2Vtb2ppID0gIvCfn6IiIGlmIHNvbF9zdGF0dXMgPT0gIlJJU0tfT04iIGVsc2UgKCLwn5S0IiBpZiAiT0ZGIiBpbiBzb2xfc3RhdHVzIGVsc2UgIvCfn6EiKQoKICAgIGxpbmVzID0gWwogICAgICAgIGYiPGI+8J+TiyBbU0lHTkFMXTogTEVHQUNZIFJFQ09WRVJZPC9iPiIsCiAgICAgICAgZiI8Y29kZT57c2VwfTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+8J+OryBDT0lOOiAke19lc2Moc3ltYm9sKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfkrAgTUFSS0VUQ0FQOiB7X2VzYyhjYXBfZGlzcGxheSl9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5OIIDI0SCBDSEc6IHtfZXNjKGNoYW5nZV9saW5lKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfkqcgTElRVUlESVRZOiB7X2VzYyhfZm10X3VzZF9jb21wYWN0KGxpcXVpZGl0eSkpfTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+8J+UpSBQQVRURVJOOiB7X2VzYyhwYXR0ZXJuX2xhYmVsKX0gKHtfZXNjKHBhdHRlcm5fc3RhdHVzKX0pPC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5WQIEFHRToge19lc2MoYWdlX3RleHQpfSAoZXN0YWJsaXNoZWQgY29pbik8L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPntzZXB9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7inIUgQlVZIFNJR05BTCAoTEVHQUNZIFJFQ09WRVJZKTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+8J+SoSBFc3RhYmxpc2hlZCBjb2luIHdpdGggZnJlc2ggcmV2ZXJzYWwgcGF0dGVybiArIHZvbHVtZSBzcGlrZTwvY29kZT4iLAogICAgICAgIGYiPGNvZGU+8J+TiiBDb21tdW5pdHkgc3RpbGwgYWN0aXZlLCA+OTAgZGF5cyBwcm92ZW4gbmFycmF0aXZlPC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT57c29sX2Vtb2ppfSBTT0wgU3RhdHVzOiB7X2VzYyhzb2xfc3RhdHVzKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPntzZXB9PC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5ONIEVudHJ5OiB7X2VzYyhkaXNwbGF5X3ByaWNlKX08L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfjq8gVGFyZ2V0IDE6IHtfZXNjKHRhcmdldDEpfSAoKzUwJSk8L2NvZGU+IiwKICAgICAgICBmIjxjb2RlPvCfjq8gVGFyZ2V0IDI6IHtfZXNjKHRhcmdldDIpfSAoKzEwMCUpPC9jb2RlPiIsCiAgICAgICAgZiI8Y29kZT7wn5uRIFN0b3A6IHtfZXNjKHN0b3ApfSAoLTUwJSk8L2NvZGU+IiwKICAgIF0KICAgIHJldHVybiAiXG4iLmpvaW4obGluZXMpCgoKZGVmIGZvcm1hdF93YXRjaGxpc3Rfc3VtbWFyeShyb3dzKToKICAgIGlmIG5vdCByb3dzOgogICAgICAgIHJldHVybiBfaGVhZGVyX2Jsb2NrKCJbU0lHTkFMXTpXQVRDSExJU1QtU1VNTUFSWSIpICsgIlxuIiArIF9yZW5kZXJfcHJlKFsiTm8gd2F0Y2hsaXN0IHRva2VucyBjb25maWd1cmVkLiJdKQoKICAgIG9yZGVyID0geyJNb21lbnR1bSI6IDAsICJSZWNsYWltIjogMSwgIkJyZWFrZG93biI6IDIsICJSYW5nZSI6IDMsICJWb2xhdGlsZSI6IDQsICJJbGxpcXVpZCI6IDUsICJOb0RhdGEiOiA2fQogICAgc29ydGVkX3Jvd3MgPSBzb3J0ZWQoCiAgICAgICAgcm93cywKICAgICAgICBrZXk9bGFtYmRhIHI6ICgKICAgICAgICAgICAgb3JkZXIuZ2V0KHN0cihyLmdldCgic3RhdHVzIikgb3IgIiIpLCA5KSwKICAgICAgICAgICAgLShmbG9hdChyLmdldCgidm9sdW1lXzI0aCIpIG9yIDApKSwKICAgICAgICApLAogICAgKQoKICAgIHRvdGFsID0gbGVuKHNvcnRlZF9yb3dzKQogICAgbGl2ZSA9IHN1bSgxIGZvciByIGluIHNvcnRlZF9yb3dzIGlmIGJvb2woci5nZXQoImhhc19saXZlX2RhdGEiLCBUcnVlKSkpCiAgICBub19kYXRhID0gdG90YWwgLSBsaXZlCiAgICBsaW5lcyA9IFtmIkNPVkVSQUdFICAge2xpdmV9L3t0b3RhbH0gbGl2ZSAoe25vX2RhdGF9IG5vLWRhdGEpIl0KICAgIGZvciBpZHgsIHJvdyBpbiBlbnVtZXJhdGUoc29ydGVkX3Jvd3MsIHN0YXJ0PTEpOgogICAgICAgIHN0YXR1c19jb2RlLCBzdGF0dXNfbGFiZWwgPSBfd2F0Y2hsaXN0X3N0YXR1c19jb2RlKHJvdy5nZXQoInN0YXR1cyIpKQogICAgICAgIHN5bWJvbCA9IHN0cihyb3cuZ2V0KCJzeW1ib2wiKSBvciAiVU5LTk9XTiIpLnVwcGVyKCkKICAgICAgICBjaDI0ID0gX2ZtdF9wY3Qocm93LmdldCgiY2hhbmdlXzI0aCIpKQogICAgICAgIGxpcSA9IF9mbXRfdXNkX2NvbXBhY3Qocm93LmdldCgibGlxdWlkaXR5IikpCiAgICAgICAgdm9sID0gX2ZtdF91c2RfY29tcGFjdChyb3cuZ2V0KCJ2b2x1bWVfMjRoIikpCiAgICAgICAgbGluZXMuYXBwZW5kKGYie2lkeDowMmR9IHtzeW1ib2w6PDEwfSB7c3RhdHVzX2NvZGU6PDN9ICh7c3RhdHVzX2xhYmVsOjw5fSkgMjRIIHtjaDI0Oj44fSBMSVEge2xpcTo+OH0gVk9MIHt2b2w6Pjh9IikKCiAgICByZXR1cm4gX2hlYWRlcl9ibG9jaygiW1NJR05BTF06V0FUQ0hMSVNULVNVTU1BUlkiKSArICJcbiIgKyBfcmVuZGVyX3ByZShsaW5lcykK'
src = base64.b64decode(b64).decode('utf-8')
try:
    ast.parse(src)
    print('SYNTAX OK:', path)
except SyntaxError as e:
    print('SYNTAX ERROR:', path, e); sys.exit(1)
with open(path, 'w') as f: f.write(src)
print('WRITTEN:', path)

# === /root/memecoin_engine/data/dexscreener.py ===
path = '/root/memecoin_engine/data/dexscreener.py'
b64 = 'aW1wb3J0IHJlcXVlc3RzCgpmcm9tIGNvbmZpZyBpbXBvcnQgKAogICAgREVYU0NSRUVORVJfQ0hBSU5fSUQsCiAgICBERVhTQ1JFRU5FUl9BUElfVVJMLAogICAgREVYU0NSRUVORVJfUEFJUlNfUEVSX1FVRVJZLAogICAgREVYU0NSRUVORVJfU0VBUkNIX1FVRVJJRVMsCiAgICBNQVhfVE9LRU5TX1BFUl9TQ0FOLAogICAgTkVXX1JVTk5FUl9QUk9GSUxFX0xJTUlULAogICAgTkVXX1JVTk5FUl9QUk9GSUxFX1NBTVBMRSwKICAgIE5FV19SVU5ORVJfVVNFX0xBVEVTVF9QUk9GSUxFUywKICAgIFNPTF9QUk9YWV9NSU5ULAopCgpfU1RBQkxFX1NZTUJPTFMgPSB7IlVTREMiLCAiVVNEVCIsICJVU0RTIiwgIlVTRDEiLCAiREFJIiwgIkZEVVNEIiwgIlBZVVNEIn0KX1NPTF9TWU1CT0xTID0geyJTT0wiLCAiV1NPTCJ9CgoKZGVmIF90b19mbG9hdCh2YWx1ZSwgZGVmYXVsdD0wLjApOgogICAgdHJ5OgogICAgICAgIGlmIHZhbHVlIGlzIE5vbmUgb3IgdmFsdWUgPT0gIiI6CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0CiAgICAgICAgcmV0dXJuIGZsb2F0KHZhbHVlKQogICAgZXhjZXB0IChUeXBlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgIHJldHVybiBkZWZhdWx0CgoKZGVmIF9iYXNlX3VybCgpOgogICAgcmV0dXJuIERFWFNDUkVFTkVSX0FQSV9VUkwgb3IgImh0dHBzOi8vYXBpLmRleHNjcmVlbmVyLmNvbSIKCgpkZWYgX2lzX2NoYWluX21hdGNoKHBhaXIpOgogICAgY2hhaW5faWQgPSBzdHIoKHBhaXIgb3Ige30pLmdldCgiY2hhaW5JZCIpIG9yICIiKS5zdHJpcCgpLmxvd2VyKCkKICAgIGlmIERFWFNDUkVFTkVSX0NIQUlOX0lEIGFuZCBjaGFpbl9pZCBhbmQgY2hhaW5faWQgIT0gREVYU0NSRUVORVJfQ0hBSU5fSUQ6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBfbm9ybWFsaXplX3BhaXIocGFpcik6CiAgICBwYWlyID0gcGFpciBvciB7fQogICAgaWYgbm90IF9pc19jaGFpbl9tYXRjaChwYWlyKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGJhc2VfdG9rZW4gPSBwYWlyLmdldCgiYmFzZVRva2VuIiwge30pIG9yIHt9CiAgICBxdW90ZV90b2tlbiA9IHBhaXIuZ2V0KCJxdW90ZVRva2VuIiwge30pIG9yIHt9CiAgICBpbmZvID0gcGFpci5nZXQoImluZm8iLCB7fSkgb3Ige30KICAgIHR4bnMgPSBwYWlyLmdldCgidHhucyIsIHt9KSBvciB7fQogICAgdHhuc19oMSA9IHR4bnMuZ2V0KCJoMSIsIHt9KSBvciB7fQogICAgdHhuc19oMjQgPSB0eG5zLmdldCgiaDI0Iiwge30pIG9yIHt9CiAgICBzb2NpYWxzID0gaW5mby5nZXQoInNvY2lhbHMiKSBvciBbXQogICAgd2Vic2l0ZXMgPSBpbmZvLmdldCgid2Vic2l0ZXMiKSBvciBbXQogICAgYWRkcmVzcyA9IGJhc2VfdG9rZW4uZ2V0KCJhZGRyZXNzIikKICAgIHN5bWJvbCA9IGJhc2VfdG9rZW4uZ2V0KCJzeW1ib2wiLCAiVU5LTk9XTiIpCiAgICBpZiBub3QgYWRkcmVzczoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHJldHVybiB7CiAgICAgICAgInN5bWJvbCI6IHN5bWJvbCwKICAgICAgICAibmFtZSI6IGJhc2VfdG9rZW4uZ2V0KCJuYW1lIikgb3Igc3ltYm9sLAogICAgICAgICJhZGRyZXNzIjogYWRkcmVzcywKICAgICAgICAicGFpcl9hZGRyZXNzIjogcGFpci5nZXQoInBhaXJBZGRyZXNzIiksCiAgICAgICAgInF1b3RlX3N5bWJvbCI6IHN0cihxdW90ZV90b2tlbi5nZXQoInN5bWJvbCIpIG9yICIiKS51cHBlcigpLAogICAgICAgICJsaXF1aWRpdHkiOiBfdG9fZmxvYXQoKHBhaXIuZ2V0KCJsaXF1aWRpdHkiLCB7fSkgb3Ige30pLmdldCgidXNkIiwgMCkpLAogICAgICAgICJ2b2x1bWVfMjRoIjogX3RvX2Zsb2F0KChwYWlyLmdldCgidm9sdW1lIiwge30pIG9yIHt9KS5nZXQoImgyNCIsIDApKSwKICAgICAgICAicHJpY2UiOiBfdG9fZmxvYXQocGFpci5nZXQoInByaWNlVXNkIiwgMCkpLAogICAgICAgICJjaGFuZ2VfMjRoIjogX3RvX2Zsb2F0KChwYWlyLmdldCgicHJpY2VDaGFuZ2UiLCB7fSkgb3Ige30pLmdldCgiaDI0IiwgMCkpLAogICAgICAgICJjaGFuZ2VfNmgiOiBfdG9fZmxvYXQoKHBhaXIuZ2V0KCJwcmljZUNoYW5nZSIsIHt9KSBvciB7fSkuZ2V0KCJoNiIsIDApKSwKICAgICAgICAiY2hhbmdlXzFoIjogX3RvX2Zsb2F0KChwYWlyLmdldCgicHJpY2VDaGFuZ2UiLCB7fSkgb3Ige30pLmdldCgiaDEiLCAwKSksCiAgICAgICAgInBhaXJfY3JlYXRlZF9hdCI6IF90b19mbG9hdChwYWlyLmdldCgicGFpckNyZWF0ZWRBdCIpLCBkZWZhdWx0PU5vbmUpLAogICAgICAgICJ0eG5zX2gxIjogaW50KF90b19mbG9hdCh0eG5zX2gxLmdldCgiYnV5cyIpLCAwKSArIF90b19mbG9hdCh0eG5zX2gxLmdldCgic2VsbHMiKSwgMCkpLAogICAgICAgICJ0eG5zX2gyNCI6IGludChfdG9fZmxvYXQodHhuc19oMjQuZ2V0KCJidXlzIiksIDApICsgX3RvX2Zsb2F0KHR4bnNfaDI0LmdldCgic2VsbHMiKSwgMCkpLAogICAgICAgICJib29zdHNfYWN0aXZlIjogaW50KF90b19mbG9hdCgocGFpci5nZXQoImJvb3N0cyIsIHt9KSBvciB7fSkuZ2V0KCJhY3RpdmUiKSwgMCkpLAogICAgICAgICJzb2NpYWxfbGlua3MiOiBsZW4oc29jaWFscykgaWYgaXNpbnN0YW5jZShzb2NpYWxzLCBsaXN0KSBlbHNlIDAsCiAgICAgICAgIndlYnNpdGVfbGlua3MiOiBsZW4od2Vic2l0ZXMpIGlmIGlzaW5zdGFuY2Uod2Vic2l0ZXMsIGxpc3QpIGVsc2UgMCwKICAgICAgICAibWFya2V0X2NhcCI6IF90b19mbG9hdChwYWlyLmdldCgibWFya2V0Q2FwIiksIGRlZmF1bHQ9Tm9uZSksCiAgICAgICAgImZkdiI6IF90b19mbG9hdChwYWlyLmdldCgiZmR2IiksIGRlZmF1bHQ9Tm9uZSksCiAgICAgICAgInNvdXJjZSI6ICJkZXhzY3JlZW5lciIsCiAgICB9CgoKZGVmIF9ub3JtYWxpemVfc29sX3Byb3h5X3BhaXIocGFpcik6CiAgICBwYWlyID0gcGFpciBvciB7fQogICAgaWYgbm90IF9pc19jaGFpbl9tYXRjaChwYWlyKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGJhc2VfdG9rZW4gPSBwYWlyLmdldCgiYmFzZVRva2VuIiwge30pIG9yIHt9CiAgICBxdW90ZV90b2tlbiA9IHBhaXIuZ2V0KCJxdW90ZVRva2VuIiwge30pIG9yIHt9CiAgICBiYXNlX3N5bWJvbCA9IHN0cihiYXNlX3Rva2VuLmdldCgic3ltYm9sIikgb3IgIiIpLnVwcGVyKCkKICAgIHF1b3RlX3N5bWJvbCA9IHN0cihxdW90ZV90b2tlbi5nZXQoInN5bWJvbCIpIG9yICIiKS51cHBlcigpCgogICAgaXNfc29sX3N0YWJsZSA9ICgKICAgICAgICAoYmFzZV9zeW1ib2wgaW4gX1NPTF9TWU1CT0xTIGFuZCBxdW90ZV9zeW1ib2wgaW4gX1NUQUJMRV9TWU1CT0xTKQogICAgICAgIG9yIChxdW90ZV9zeW1ib2wgaW4gX1NPTF9TWU1CT0xTIGFuZCBiYXNlX3N5bWJvbCBpbiBfU1RBQkxFX1NZTUJPTFMpCiAgICApCiAgICBpc19zb2xfcGFpciA9IGJhc2Vfc3ltYm9sIGluIF9TT0xfU1lNQk9MUyBvciBxdW90ZV9zeW1ib2wgaW4gX1NPTF9TWU1CT0xTCiAgICBpZiBub3QgKGlzX3NvbF9zdGFibGUgb3IgaXNfc29sX3BhaXIpOgogICAgICAgIHJldHVybiBOb25lCgogICAgc29sX3Rva2VuID0gYmFzZV90b2tlbiBpZiBiYXNlX3N5bWJvbCBpbiBfU09MX1NZTUJPTFMgZWxzZSBxdW90ZV90b2tlbgogICAgaWYgbm90IHNvbF90b2tlbjoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHJldHVybiB7CiAgICAgICAgInN5bWJvbCI6IHN0cihzb2xfdG9rZW4uZ2V0KCJzeW1ib2wiKSBvciAiU09MIikudXBwZXIoKSwKICAgICAgICAiYWRkcmVzcyI6IHNvbF90b2tlbi5nZXQoImFkZHJlc3MiKSwKICAgICAgICAicGFpcl9hZGRyZXNzIjogcGFpci5nZXQoInBhaXJBZGRyZXNzIiksCiAgICAgICAgImxpcXVpZGl0eSI6IF90b19mbG9hdCgocGFpci5nZXQoImxpcXVpZGl0eSIsIHt9KSBvciB7fSkuZ2V0KCJ1c2QiLCAwKSksCiAgICAgICAgInZvbHVtZV8yNGgiOiBfdG9fZmxvYXQoKHBhaXIuZ2V0KCJ2b2x1bWUiLCB7fSkgb3Ige30pLmdldCgiaDI0IiwgMCkpLAogICAgICAgICJwcmljZSI6IF90b19mbG9hdChwYWlyLmdldCgicHJpY2VVc2QiLCAwKSksCiAgICAgICAgImNoYW5nZV8yNGgiOiBfdG9fZmxvYXQoKHBhaXIuZ2V0KCJwcmljZUNoYW5nZSIsIHt9KSBvciB7fSkuZ2V0KCJoMjQiLCAwKSksCiAgICAgICAgImNoYW5nZV82aCI6IF90b19mbG9hdCgocGFpci5nZXQoInByaWNlQ2hhbmdlIiwge30pIG9yIHt9KS5nZXQoImg2IiwgMCkpLAogICAgICAgICJjaGFuZ2VfMWgiOiBfdG9fZmxvYXQoKHBhaXIuZ2V0KCJwcmljZUNoYW5nZSIsIHt9KSBvciB7fSkuZ2V0KCJoMSIsIDApKSwKICAgICAgICAibWFya2V0X2NhcCI6IF90b19mbG9hdChwYWlyLmdldCgibWFya2V0Q2FwIiksIGRlZmF1bHQ9Tm9uZSksCiAgICAgICAgImZkdiI6IF90b19mbG9hdChwYWlyLmdldCgiZmR2IiksIGRlZmF1bHQ9Tm9uZSksCiAgICAgICAgImlzX3NvbF9zdGFibGUiOiBib29sKGlzX3NvbF9zdGFibGUpLAogICAgICAgICJzb3VyY2UiOiAiZGV4c2NyZWVuZXJfc29sX3Byb3h5IiwKICAgIH0KCgpkZWYgZmV0Y2hfdG9rZW5fc25hcHNob3QoYWRkcmVzcyk6CiAgICAiIiIKICAgIEZldGNoIGxpdmUgdG9rZW4gc25hcHNob3QgZnJvbSBEZXhTY3JlZW5lciBmb3IgYSBzcGVjaWZpYyB0b2tlbiBhZGRyZXNzLgogICAgQ2hvb3NlcyB0aGUgYmVzdCBTb2xhbmEgcGFpciBieSBsaXF1aWRpdHkgYW5kIHRoZW4gdm9sdW1lLgogICAgIiIiCiAgICBpZiBub3QgYWRkcmVzczoKICAgICAgICByZXR1cm4gTm9uZQogICAgdHJ5OgogICAgICAgIGVuZHBvaW50ID0gZiJ7X2Jhc2VfdXJsKCkucnN0cmlwKCcvJyl9L2xhdGVzdC9kZXgvdG9rZW5zL3thZGRyZXNzfSIKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChlbmRwb2ludCwgdGltZW91dD0xNSkKICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpIG9yIHt9CiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgIHJldHVybiBOb25lCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHBhaXJzID0gZGF0YS5nZXQoInBhaXJzIiwgW10pIG9yIFtdCiAgICBub3JtYWxpemVkID0gW3AgZm9yIHAgaW4gKF9ub3JtYWxpemVfcGFpcihwYWlyKSBmb3IgcGFpciBpbiBwYWlycykgaWYgcF0KICAgIGlmIG5vdCBub3JtYWxpemVkOgogICAgICAgIHJldHVybiBOb25lCiAgICBub3JtYWxpemVkLnNvcnQoa2V5PWxhbWJkYSB0OiAodFsibGlxdWlkaXR5Il0sIHRbInZvbHVtZV8yNGgiXSksIHJldmVyc2U9VHJ1ZSkKICAgIHJldHVybiBub3JtYWxpemVkWzBdCgoKZGVmIGZldGNoX3NvbF9tYXJrZXRfcHJveHkocXVlcnk9IlNPTCIpOgogICAgIiIiCiAgICBGZXRjaCBhIGxpcXVpZCBTT0wgcGFpciBzbmFwc2hvdCBmcm9tIERleFNjcmVlbmVyIHRvIHVzZSBhcyBtYXJrZXQgcHJveHkuCiAgICBVc2VzIFNPTC9zdGFibGUgcGFpcnMgb25seSB0byBhdm9pZCBkaXN0b3J0ZWQgbW92ZXMgZnJvbSBTT0wtcXVvdGVkIG1lbWUgcGFpcnMuCiAgICAiIiIKICAgIHBhaXJzID0gW10KCiAgICBpZiBTT0xfUFJPWFlfTUlOVDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVuZHBvaW50ID0gZiJ7X2Jhc2VfdXJsKCkucnN0cmlwKCcvJyl9L2xhdGVzdC9kZXgvdG9rZW5zL3tTT0xfUFJPWFlfTUlOVH0iCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGVuZHBvaW50LCB0aW1lb3V0PTE1KQogICAgICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKSBvciB7fQogICAgICAgICAgICBwYWlycyA9IGRhdGEuZ2V0KCJwYWlycyIsIFtdKSBvciBbXQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb246CiAgICAgICAgICAgIHBhaXJzID0gW10KICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcGFpcnMgPSBbXQoKICAgIGlmIG5vdCBwYWlyczoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVuZHBvaW50ID0gZiJ7X2Jhc2VfdXJsKCkucnN0cmlwKCcvJyl9L2xhdGVzdC9kZXgvc2VhcmNoIgogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChlbmRwb2ludCwgcGFyYW1zPXsicSI6IHF1ZXJ5IG9yICJTT0wifSwgdGltZW91dD0xNSkKICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5qc29uKCkgb3Ige30KICAgICAgICAgICAgcGFpcnMgPSBkYXRhLmdldCgicGFpcnMiLCBbXSkgb3IgW10KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIG5vcm1hbGl6ZWQgPSBbcCBmb3IgcCBpbiAoX25vcm1hbGl6ZV9zb2xfcHJveHlfcGFpcihwYWlyKSBmb3IgcGFpciBpbiBwYWlycykgaWYgcF0KICAgIGlmIG5vdCBub3JtYWxpemVkOgogICAgICAgIHJldHVybiBOb25lCgogICAgc3RhYmxlX3BhaXJzID0gW3AgZm9yIHAgaW4gbm9ybWFsaXplZCBpZiBwLmdldCgiaXNfc29sX3N0YWJsZSIpXQogICAgaWYgbm90IHN0YWJsZV9wYWlyczoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHN0YWJsZV9wYWlycy5zb3J0KGtleT1sYW1iZGEgdDogKHRbImxpcXVpZGl0eSJdLCB0WyJ2b2x1bWVfMjRoIl0pLCByZXZlcnNlPVRydWUpCiAgICByZXR1cm4gc3RhYmxlX3BhaXJzWzBdCgoKZGVmIGZldGNoX21hcmtldF9kYXRhKCk6CiAgICAiIiIKICAgIEZldGNoIG1hcmtldCBkYXRhIGZyb20gRGV4U2NyZWVuZXIgQVBJIGJhc2VkIG9uIGEgcXVlcnkgKGUuZy4sICJTT0wiKS4KICAgIFRoZSBmdW5jdGlvbiBhc3N1bWVzIGFuIEFQSSBVUkwgdGhhdCBwcm92aWRlcyB0b2tlbiBkYXRhIGluIGEgc3RydWN0dXJlZCBmb3JtYXQuCiAgICAiIiIKICAgIHRyeToKICAgICAgICBlbmRwb2ludCA9IGYie19iYXNlX3VybCgpLnJzdHJpcCgnLycpfS9sYXRlc3QvZGV4L3NlYXJjaCIKICAgICAgICBxdWVyaWVzID0gREVYU0NSRUVORVJfU0VBUkNIX1FVRVJJRVMgb3IgWyJTT0wiXQogICAgICAgIHVuaXF1ZV90b2tlbnMgPSB7fQoKICAgICAgICBmb3IgcXVlcnkgaW4gcXVlcmllczoKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICBlbmRwb2ludCwKICAgICAgICAgICAgICAgIHBhcmFtcz17InEiOiBxdWVyeX0sCiAgICAgICAgICAgICAgICB0aW1lb3V0PTE1LAogICAgICAgICAgICApCiAgICAgICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQoKICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBwYWlycyA9IGRhdGEuZ2V0KCJwYWlycyIsIFtdKSBvciBbXQoKICAgICAgICAgICAgZm9yIHBhaXIgaW4gcGFpcnNbOm1heCgxLCBERVhTQ1JFRU5FUl9QQUlSU19QRVJfUVVFUlkpXToKICAgICAgICAgICAgICAgIHRva2VuID0gX25vcm1hbGl6ZV9wYWlyKHBhaXIpCiAgICAgICAgICAgICAgICBpZiBub3QgdG9rZW46CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBleGlzdGluZyA9IHVuaXF1ZV90b2tlbnMuZ2V0KHRva2VuWyJhZGRyZXNzIl0pCiAgICAgICAgICAgICAgICBpZiBub3QgZXhpc3Rpbmcgb3IgdG9rZW5bInZvbHVtZV8yNGgiXSA+IGV4aXN0aW5nWyJ2b2x1bWVfMjRoIl06CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlX3Rva2Vuc1t0b2tlblsiYWRkcmVzcyJdXSA9IHRva2VuCgogICAgICAgIHRva2VucyA9IGxpc3QodW5pcXVlX3Rva2Vucy52YWx1ZXMoKSkKICAgICAgICB0b2tlbnMuc29ydChrZXk9bGFtYmRhIHQ6ICh0WyJ2b2x1bWVfMjRoIl0sIHRbImxpcXVpZGl0eSJdKSwgcmV2ZXJzZT1UcnVlKQogICAgICAgIHJldHVybiB0b2tlbnNbOm1heCgxLCBNQVhfVE9LRU5TX1BFUl9TQ0FOKV0KCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJFcnJvciBmZXRjaGluZyBtYXJrZXQgZGF0YToge2V9IikKICAgICAgICByZXR1cm4gW10KCgpkZWYgZmV0Y2hfcnVubmVyX3dhdGNoX2NhbmRpZGF0ZXMocXVlcmllcywgcGFpcnNfcGVyX3F1ZXJ5OiBpbnQgPSAyNCwgbGltaXQ6IGludCA9IDEwMCk6CiAgICAiIiIKICAgIEZldGNoIGJyb2FkIERleFNjcmVlbmVyIGNhbmRpZGF0ZXMgaW50ZW5kZWQgZm9yIHdhdGNobGlzdC1zdHlsZSBuZXctcnVubmVyIGFsZXJ0cy4KICAgICIiIgogICAgdHJ5OgogICAgICAgIGVuZHBvaW50ID0gZiJ7X2Jhc2VfdXJsKCkucnN0cmlwKCcvJyl9L2xhdGVzdC9kZXgvc2VhcmNoIgogICAgICAgIHVuaXF1ZV90b2tlbnMgPSB7fQoKICAgICAgICBmb3IgcXVlcnkgaW4gKHF1ZXJpZXMgb3IgWyJTT0wiXSk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgZW5kcG9pbnQsCiAgICAgICAgICAgICAgICBwYXJhbXM9eyJxIjogcXVlcnl9LAogICAgICAgICAgICAgICAgdGltZW91dD0xNSwKICAgICAgICAgICAgKQogICAgICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKCiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5qc29uKCkgb3Ige30KICAgICAgICAgICAgcGFpcnMgPSBkYXRhLmdldCgicGFpcnMiLCBbXSkgb3IgW10KICAgICAgICAgICAgZm9yIHBhaXIgaW4gcGFpcnNbOm1heCgxLCBwYWlyc19wZXJfcXVlcnkpXToKICAgICAgICAgICAgICAgIHRva2VuID0gX25vcm1hbGl6ZV9wYWlyKHBhaXIpCiAgICAgICAgICAgICAgICBpZiBub3QgdG9rZW46CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBleGlzdGluZyA9IHVuaXF1ZV90b2tlbnMuZ2V0KHRva2VuWyJhZGRyZXNzIl0pCiAgICAgICAgICAgICAgICBpZiBub3QgZXhpc3Rpbmc6CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlX3Rva2Vuc1t0b2tlblsiYWRkcmVzcyJdXSA9IHRva2VuCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4uZ2V0KCJsaXF1aWRpdHkiKSBvciAwKSA+IChleGlzdGluZy5nZXQoImxpcXVpZGl0eSIpIG9yIDApOgogICAgICAgICAgICAgICAgICAgIHVuaXF1ZV90b2tlbnNbdG9rZW5bImFkZHJlc3MiXV0gPSB0b2tlbgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiAodG9rZW4uZ2V0KCJ2b2x1bWVfMjRoIikgb3IgMCkgPiAoZXhpc3RpbmcuZ2V0KCJ2b2x1bWVfMjRoIikgb3IgMCk6CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlX3Rva2Vuc1t0b2tlblsiYWRkcmVzcyJdXSA9IHRva2VuCgogICAgICAgIGlmIE5FV19SVU5ORVJfVVNFX0xBVEVTVF9QUk9GSUxFUzoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcHJvZmlsZXNfZW5kcG9pbnQgPSBmIntfYmFzZV91cmwoKS5yc3RyaXAoJy8nKX0vdG9rZW4tcHJvZmlsZXMvbGF0ZXN0L3YxIgogICAgICAgICAgICAgICAgcHJvZmlsZXNfcmVzcCA9IHJlcXVlc3RzLmdldChwcm9maWxlc19lbmRwb2ludCwgdGltZW91dD0xNSkKICAgICAgICAgICAgICAgIHByb2ZpbGVzX3Jlc3AucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgICAgICBwcm9maWxlcyA9IHByb2ZpbGVzX3Jlc3AuanNvbigpIG9yIFtdCiAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwcm9maWxlcywgbGlzdCk6CiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXMgPSBbXQogICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgICAgICAgICAgcHJvZmlsZXMgPSBbXQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHByb2ZpbGVzID0gW10KCiAgICAgICAgICAgIHBpY2tlZCA9IFtdCiAgICAgICAgICAgIGZvciBwIGluIHByb2ZpbGVzWzptYXgoMSwgTkVXX1JVTk5FUl9QUk9GSUxFX0xJTUlUKV06CiAgICAgICAgICAgICAgICBpZiBzdHIocC5nZXQoImNoYWluSWQiKSBvciAiIikuc3RyaXAoKS5sb3dlcigpICE9IERFWFNDUkVFTkVSX0NIQUlOX0lEOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB0b2tlbl9hZGRyZXNzID0gcC5nZXQoInRva2VuQWRkcmVzcyIpCiAgICAgICAgICAgICAgICBpZiBub3QgdG9rZW5fYWRkcmVzczoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgcGlja2VkLmFwcGVuZChwKQogICAgICAgICAgICAgICAgaWYgbGVuKHBpY2tlZCkgPj0gbWF4KDEsIE5FV19SVU5ORVJfUFJPRklMRV9TQU1QTEUpOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBmb3IgcHJvZmlsZSBpbiBwaWNrZWQ6CiAgICAgICAgICAgICAgICB0b2tlbl9hZGRyZXNzID0gcHJvZmlsZS5nZXQoInRva2VuQWRkcmVzcyIpCiAgICAgICAgICAgICAgICBpZiBub3QgdG9rZW5fYWRkcmVzczoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgc25hcHNob3QgPSBmZXRjaF90b2tlbl9zbmFwc2hvdCh0b2tlbl9hZGRyZXNzKQogICAgICAgICAgICAgICAgaWYgbm90IHNuYXBzaG90OgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBsaW5rcyA9IHByb2ZpbGUuZ2V0KCJsaW5rcyIpIG9yIFtdCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGxpbmtzLCBsaXN0KToKICAgICAgICAgICAgICAgICAgICBzb2NpYWxfY291bnQgPSBsZW4oW3ggZm9yIHggaW4gbGlua3MgaWYgaXNpbnN0YW5jZSh4LCBkaWN0KSBhbmQgeC5nZXQoInR5cGUiKSBpbiB7InR3aXR0ZXIiLCAidGVsZWdyYW0iLCAiZGlzY29yZCJ9XSkKICAgICAgICAgICAgICAgICAgICB3ZWJzaXRlX2NvdW50ID0gbGVuKFt4IGZvciB4IGluIGxpbmtzIGlmIGlzaW5zdGFuY2UoeCwgZGljdCkgYW5kIHguZ2V0KCJ0eXBlIikgPT0gIndlYnNpdGUiXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc29jaWFsX2NvdW50ID0gMAogICAgICAgICAgICAgICAgICAgIHdlYnNpdGVfY291bnQgPSAwCgogICAgICAgICAgICAgICAgc25hcHNob3RbImRlc2NyaXB0aW9uIl0gPSBwcm9maWxlLmdldCgiZGVzY3JpcHRpb24iKSBvciAiIgogICAgICAgICAgICAgICAgc25hcHNob3RbInNvY2lhbF9saW5rcyJdID0gbWF4KGludChzbmFwc2hvdC5nZXQoInNvY2lhbF9saW5rcyIpIG9yIDApLCBzb2NpYWxfY291bnQpCiAgICAgICAgICAgICAgICBzbmFwc2hvdFsid2Vic2l0ZV9saW5rcyJdID0gbWF4KGludChzbmFwc2hvdC5nZXQoIndlYnNpdGVfbGlua3MiKSBvciAwKSwgd2Vic2l0ZV9jb3VudCkKICAgICAgICAgICAgICAgIHNuYXBzaG90WyJzb3VyY2UiXSA9ICJkZXhzY3JlZW5lcl9wcm9maWxlK3NuYXBzaG90IgoKICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gdW5pcXVlX3Rva2Vucy5nZXQoc25hcHNob3RbImFkZHJlc3MiXSkKICAgICAgICAgICAgICAgIGlmIG5vdCBleGlzdGluZzoKICAgICAgICAgICAgICAgICAgICB1bmlxdWVfdG9rZW5zW3NuYXBzaG90WyJhZGRyZXNzIl1dID0gc25hcHNob3QKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmdldCgibGlxdWlkaXR5Iikgb3IgMCkgPiAoZXhpc3RpbmcuZ2V0KCJsaXF1aWRpdHkiKSBvciAwKToKICAgICAgICAgICAgICAgICAgICB1bmlxdWVfdG9rZW5zW3NuYXBzaG90WyJhZGRyZXNzIl1dID0gc25hcHNob3QKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmdldCgidm9sdW1lXzI0aCIpIG9yIDApID4gKGV4aXN0aW5nLmdldCgidm9sdW1lXzI0aCIpIG9yIDApOgogICAgICAgICAgICAgICAgICAgIHVuaXF1ZV90b2tlbnNbc25hcHNob3RbImFkZHJlc3MiXV0gPSBzbmFwc2hvdAoKICAgICAgICB0b2tlbnMgPSBsaXN0KHVuaXF1ZV90b2tlbnMudmFsdWVzKCkpCiAgICAgICAgdG9rZW5zLnNvcnQoCiAgICAgICAgICAgIGtleT1sYW1iZGEgdDogKAogICAgICAgICAgICAgICAgdC5nZXQoInZvbHVtZV8yNGgiKSBvciAwLAogICAgICAgICAgICAgICAgdC5nZXQoImxpcXVpZGl0eSIpIG9yIDAsCiAgICAgICAgICAgICAgICB0LmdldCgidHhuc19oMSIpIG9yIDAsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHJldmVyc2U9VHJ1ZSwKICAgICAgICApCiAgICAgICAgcmV0dXJuIHRva2Vuc1s6bWF4KDEsIGxpbWl0KV0KCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgIHJldHVybiBbXQoKCiMgQnJvYWQga2V5d29yZCBzZXQgdGhhdCBjb3ZlcnMgdGhlIGVzdGFibGlzaGVkIFNvbGFuYSBtZW1lY29pbiB1bml2ZXJzZS4KIyBEZXhTY3JlZW5lciBzZWFyY2ggcmV0dXJucyB1cCB0byB+MzAgcGFpcnMgcGVyIHF1ZXJ5IOKAlCB0aGVzZSB0ZXJtcyBjb2xsZWN0aXZlbHkKIyBzdXJmYWNlIGh1bmRyZWRzIG9mIG9sZC9lc3RhYmxpc2hlZCB0b2tlbnMgd2l0aG91dCBhIGhhcmRjb2RlZCB3aGl0ZWxpc3QuCl9MRUdBQ1lfQlJPQURfUVVFUklFUyA9IFsKICAgICJTT0wiLCAiQk9OSyIsICJXSUYiLCAiUEVQRSIsICJET0dFIiwgIlNISUIiLCAiRkxPS0kiLAogICAgIlBPUENBVCIsICJCT01FIiwgIk1ZUk8iLCAiTkVJUk8iLCAiTU9PREVORyIsICJQTlVUIiwgIkdPQVQiLAogICAgIk1FVyIsICJCUkVUVCIsICJUVVJCTyIsICJTTEVSRiIsICJTQU1PIiwgIkNPUEUiLCAiSlVQIiwKICAgICJSRU5ERVIiLCAiUFlUSCIsICJPUkNBIiwgIlNURVAiLCAiTU5HTyIsICJDQVRTIiwgIkZFVENIIiwKICAgICJBSSIsICJNRU1FIiwgIkNBVCIsICJET0ciLCAiRlJPRyIsICJNT05LRVkiLCAiVFJVTVAiLCAiUE9OS0UiLApdCgoKZGVmIGZldGNoX2xlZ2FjeV9yZWNvdmVyeV9jYW5kaWRhdGVzKAogICAgcXVlcmllcz1Ob25lLAogICAgcGFpcnNfcGVyX3F1ZXJ5OiBpbnQgPSAxMCwKICAgIGxpbWl0OiBpbnQgPSAzMDAsCik6CiAgICAiIiIKICAgIEZldGNoIGJyb2FkIERleFNjcmVlbmVyIGNhbmRpZGF0ZXMgZm9yIHRoZSBMZWdhY3kgUmVjb3Zlcnkgc2Nhbm5lci4KICAgIFVzZXMgYSB3aWRlIGtleXdvcmQgc3dlZXAgdG8gZmluZCBBTEwgZXN0YWJsaXNoZWQgU29sYW5hIHRva2VucywKICAgIG5vdCBqdXN0IGEgaGFyZGNvZGVkIDEwLWNvaW4gbGlzdC4KICAgIEZhbGxzIGJhY2sgdG8gX0xFR0FDWV9CUk9BRF9RVUVSSUVTIHdoZW4gbm8gY3VzdG9tIHF1ZXJpZXMgcHJvdmlkZWQuCiAgICAiIiIKICAgIHVzZV9xdWVyaWVzID0gcXVlcmllcyBpZiBxdWVyaWVzIGVsc2UgX0xFR0FDWV9CUk9BRF9RVUVSSUVTCiAgICB0cnk6CiAgICAgICAgZW5kcG9pbnQgPSBmIntfYmFzZV91cmwoKS5yc3RyaXAoJy8nKX0vbGF0ZXN0L2RleC9zZWFyY2giCiAgICAgICAgdW5pcXVlX3Rva2VucyA9IHt9CgogICAgICAgIGZvciBxdWVyeSBpbiB1c2VfcXVlcmllczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zPXsicSI6IHF1ZXJ5fSwKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PTE1LAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpIG9yIHt9CiAgICAgICAgICAgICAgICBwYWlycyA9IGRhdGEuZ2V0KCJwYWlycyIsIFtdKSBvciBbXQogICAgICAgICAgICAgICAgZm9yIHBhaXIgaW4gcGFpcnNbOm1heCgxLCBwYWlyc19wZXJfcXVlcnkpXToKICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9ub3JtYWxpemVfcGFpcihwYWlyKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0b2tlbjoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBhZGRyID0gdG9rZW5bImFkZHJlc3MiXQogICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gdW5pcXVlX3Rva2Vucy5nZXQoYWRkcikKICAgICAgICAgICAgICAgICAgICBpZiBub3QgZXhpc3Rpbmc6CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZV90b2tlbnNbYWRkcl0gPSB0b2tlbgogICAgICAgICAgICAgICAgICAgIGVsaWYgKHRva2VuLmdldCgibGlxdWlkaXR5Iikgb3IgMCkgPiAoZXhpc3RpbmcuZ2V0KCJsaXF1aWRpdHkiKSBvciAwKToKICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlX3Rva2Vuc1thZGRyXSA9IHRva2VuCiAgICAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb246CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB0b2tlbnMgPSBsaXN0KHVuaXF1ZV90b2tlbnMudmFsdWVzKCkpCiAgICAgICAgdG9rZW5zLnNvcnQoCiAgICAgICAgICAgIGtleT1sYW1iZGEgdDogKHQuZ2V0KCJsaXF1aWRpdHkiKSBvciAwLCB0LmdldCgidm9sdW1lXzI0aCIpIG9yIDApLAogICAgICAgICAgICByZXZlcnNlPVRydWUsCiAgICAgICAgKQogICAgICAgIHJldHVybiB0b2tlbnNbOm1heCgxLCBsaW1pdCldCgogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXR1cm4gW10K'
src = base64.b64decode(b64).decode('utf-8')
try:
    ast.parse(src)
    print('SYNTAX OK:', path)
except SyntaxError as e:
    print('SYNTAX ERROR:', path, e); sys.exit(1)
with open(path, 'w') as f: f.write(src)
print('WRITTEN:', path)

print('All files written OK')
PYEOF

echo 'Restarting memecoin-engine...'
systemctl restart memecoin-engine
sleep 3
systemctl status memecoin-engine --no-pager | head -20
echo 'Deploy complete.'